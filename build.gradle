/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

println 'build.gradle    Configuration:  Evaluating build script'

task myFirst {
  group = 'demo'
  doFirst {
    println 'build.gradle    Execution:      myFirst action'
  }
  println 'build.gradle    Configuration:  myFirst config'
}

task mySecond(dependsOn: myFirst) {
  group = 'demo'
  doFirst {
    println 'build.gradle    Execution:      mySecond action'
  }
}

task myThird(dependsOn: myFirst) {
  group = 'demo'
  doFirst {
    println 'build.gradle    Execution:      myThird action'
  }
}

task reverse {
  group = 'text'

  ext.source = file('src/raw.txt')
  ext.dest = file('build/reverse.txt')

  inputs.file source
  outputs.file dest

  doFirst {
    dest.text = source.text.reverse()
  }
}

task uppercase {
  group = 'text'
  dependsOn reverse

  ext.source = reverse.dest
  ext.dest = file('build/uppercase.txt')

  inputs.file source
  outputs.file dest

  doFirst {
    dest.text = source.text.toUpperCase()
  }
}
